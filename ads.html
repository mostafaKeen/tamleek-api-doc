<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ads API Documentation</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f5f7fa;
        color: #333;
        line-height: 1.6;
        margin: 0;
        padding: 0;
    }
    header {
        background-color: #3b82f6;
        color: white;
        padding: 2rem;
        text-align: center;
    }
    header h1 {
        margin: 0;
        font-size: 2rem;
    }
    .container {
        max-width: 1000px;
        margin: 2rem auto;
        padding: 0 1rem;
    }
    section {
        background: white;
        padding: 1.5rem;
        margin-bottom: 2rem;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    h2 {
        color: #3b82f6;
        margin-top: 0;
    }
    code {
        background: #f3f4f6;
        padding: 0.2rem 0.4rem;
        border-radius: 4px;
        font-family: monospace;
    }
    pre {
        background: #f3f4f6;
        padding: 1rem;
        overflow-x: auto;
        border-radius: 6px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1rem;
    }
    table, th, td {
        border: 1px solid #ddd;
    }
    th, td {
        padding: 0.8rem;
        text-align: left;
    }
    th {
        background-color: #dbeafe;
    }
    .endpoint {
        font-weight: bold;
        color: #1d4ed8;
    }
</style>
</head>
<body>

<header>
    <h1>Ads API Documentation</h1>
</header>

<div class="container">

    <!-- Public: List Active Ads -->
    <section>
        <h2>GET /api/ads/active</h2>
        <p class="endpoint">Get all active ads. Available for guests and all authenticated users.</p>
        <h3>Response (200 OK)</h3>
        <pre>
[
    {
        "id": 1,
        "title": "Winter Sale",
        "content": "50% off on all items!",
        "discount": 50,
        "discount_type": "percentage",
        "bitrix_item_id": 101,
        "image_url": "ads/ad1.jpg",
        "cta_text": "Shop Now",
        "cta_link": "https://example.com/shop",
        "status": "active",
        "starts_at": "2026-01-01T00:00:00.000000Z",
        "ends_at": "2026-01-31T23:59:59.000000Z",
        "priority": 10,
        "max_views": 1000,
        "created_at": "2026-01-10T12:00:00.000000Z",
        "updated_at": "2026-01-10T12:00:00.000000Z"
    }
]
        </pre>
    </section>

    <!-- Public: Show Single Ad -->
    <section>
        <h2>GET /api/ads/{ad}</h2>
        <p class="endpoint">View a single ad by ID. Publicly accessible.</p>
        <h3>Response (200 OK)</h3>
        <pre>
{
    "id": 1,
    "title": "Winter Sale",
    "content": "50% off on all items!",
    "discount": 50,
    "discount_type": "percentage",
    "bitrix_item_id": 101,
    "image_url": "ads/ad1.jpg",
    "cta_text": "Shop Now",
    "cta_link": "https://example.com/shop",
    "status": "active",
    "starts_at": "2026-01-01T00:00:00.000000Z",
    "ends_at": "2026-01-31T23:59:59.000000Z",
    "priority": 10,
    "max_views": 1000,
    "created_at": "2026-01-10T12:00:00.000000Z",
    "updated_at": "2026-01-10T12:00:00.000000Z"
}
        </pre>
    </section>

    <!-- Admin: List Ads -->
    <section>
        <h2>GET /api/ads</h2>
        <p class="endpoint">List all ads. Admin only (requires authentication via Sanctum).</p>
        <h3>Response (200 OK)</h3>
        <pre>
{
    "current_page": 1,
    "data": [
        {
            "id": 1,
            "title": "Winter Sale",
            "content": "50% off on all items!",
            "status": "active",
            ...
        }
    ],
    "total": 10,
    "per_page": 20
}
        </pre>
    </section>

    <!-- Admin: Create Ad -->
    <section>
        <h2>POST /api/ads</h2>
        <p class="endpoint">Create a new ad. Admin only. Use <code>multipart/form-data</code> for image upload.</p>
        <h3>Request Body (multipart/form-data)</h3>
        <pre>
title: Winter Sale
content: 50% off on all items!
discount: 50
discount_type: percentage
bitrix_item_id: 101
status: active
starts_at: 2026-01-01
ends_at: 2026-01-31
priority: 10
max_views: 1000
image: [upload file]
cta_text: Shop Now
cta_link: https://example.com/shop
        </pre>
        <h3>Response (201 Created)</h3>
        <pre>
{
    "id": 1,
    "title": "Winter Sale",
    "content": "50% off on all items!",
    "image_url": "ads/ad1.jpg",
    "status": "active",
    "created_at": "2026-01-10T12:00:00.000000Z",
    "updated_at": "2026-01-10T12:00:00.000000Z"
}
        </pre>
    </section>

    <!-- Admin: Update Ad -->
    <section>
        <h2>PUT /api/ads/{ad}</h2>
        <p class="endpoint">Update an existing ad. Admin only. Use <code>multipart/form-data</code> to replace image.</p>
        <h3>Request Body (example)</h3>
        <pre>
title: Updated Winter Sale
image: [new file]
status: active
priority: 20
        </pre>
        <h3>Response (200 OK)</h3>
        <pre>
{
    "id": 1,
    "title": "Updated Winter Sale",
    "image_url": "ads/new-ad.jpg",
    "status": "active",
    "updated_at": "2026-01-12T12:00:00.000000Z"
}
        </pre>
    </section>

    <!-- Admin: Delete Ad -->
    <section>
        <h2>DELETE /api/ads/{ad}</h2>
        <p class="endpoint">Delete an ad. Admin only. Associated image will also be deleted.</p>
        <h3>Response (200 OK)</h3>
        <pre>
{
    "message": "Ad deleted successfully"
}
        </pre>
    </section>

</div>

</body>
</html>
